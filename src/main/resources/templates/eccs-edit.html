<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≠–ö–ö</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-6">

<h1 class="text-3xl font-bold text-gray-800 mb-6">
    –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≠–ö–ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: <span th:text="${ecc.workerId}"></span>
</h1>

<form th:action="@{/workers/view/{workerId}/eccs/{eccId}/edit(workerId=${workerId}, eccId=${ecc.id})}"
      th:object="${ecc}" method="post"
      onsubmit="return validateDates()"
      class="bg-white p-6 rounded-xl shadow-md w-1/2">

    <label class="block mb-2 font-semibold text-gray-700">–ù–∞–∑–≤–∞–Ω–∏–µ –≠–ö–ö</label>
    <input type="text" th:field="*{title}" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –≠–ö–ö –Ω–∞ –¥–æ–ø—É—Å–∫ ..."
           class="w-full border rounded-lg px-3 py-2 mb-4 shadow-sm" required>

    <label class="block mb-2 font-semibold text-gray-700">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
    <input type="date" id="startDate" th:field="*{start}"
           class="w-full border rounded-lg px-3 py-2 mb-4 shadow-sm" required>

    <label class="block mb-2 font-semibold text-gray-700">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
    <input type="date" id="endDate" th:field="*{end}"
           class="w-full border rounded-lg px-3 py-2 mb-4 shadow-sm" required>

    <label class="block mb-2 font-semibold text-gray-700">–û–ø–∏—Å–∞–Ω–∏–µ</label>
    <textarea th:field="*{description}" placeholder="(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"
              class="w-full border rounded-lg px-3 py-2 mb-4 shadow-sm"></textarea>

    <div class="flex gap-4 mt-4">
        <button type="submit"
                class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 transition">
            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
        </button>
        <a th:href="@{/workers/view/{workerId}/eccs(workerId=${workerId})}"
           class="bg-red-600 text-white px-4 py-2 rounded-lg shadow hover:bg-red-700 transition">
            ‚ùå –û—Ç–º–µ–Ω–∞
        </a>
    </div>
</form>

<script>
    function validateDates() {
        const start = document.getElementById("startDate").value;
        const end = document.getElementById("endDate").value;
        if (start && end && new Date(end) < new Date(start)) {
            alert("–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –≠–ö–ö –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–Ω—å—à–µ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞!");
            return false;
        }
        return true;
    }
</script>

</body>
</html>
