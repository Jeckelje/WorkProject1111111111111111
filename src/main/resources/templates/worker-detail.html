<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-6">

<h1 class="text-3xl font-bold text-gray-800 mb-6">–ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h1>

<!-- –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É" -->
<div class="mt-2 mb-6">
    <a th:href="@{/workers/view}"
       class="inline-block bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg">
        ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
    </a>
</div>

<div class="bg-white shadow-lg rounded-2xl p-6 border border-gray-200 mb-6">
    <h2 class="text-xl font-bold text-gray-800 mb-2"
        th:text="${worker.surname + ' ' + worker.name + ' ' + worker.patronymicName}"></h2>
    <p class="text-gray-600 mb-2" th:text="${worker.jobTitle}"></p>

    <div class="bg-white shadow-lg rounded-2xl p-6 border border-gray-200 mb-6">
        <h2 class="text-xl font-bold text-gray-800 mb-2"
            th:text="${worker.surname + ' ' + worker.name + ' ' + worker.patronymicName}"></h2>

        <!-- –î–æ–ª–∂–Ω–æ—Å—Ç—å -->
        <p class="text-gray-600 mb-2" th:text="${worker.jobTitle}"></p>

        <!-- –û—Ç–¥–µ–ª -->
        <p class="text-gray-600 mb-2">üè¢ <span th:text="${worker.department}"></span></p>

        <!-- –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è + –≤–æ–∑—Ä–∞—Å—Ç -->
        <p class="text-gray-700 mb-4">
            üéÇ –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è:
            <span th:text="${#temporals.format(worker.birthDay, 'dd.MM.yyyy')}"></span>
            (<span th:text="${#temporals.createNow().year - worker.birthDay.year}"></span> –ª–µ—Ç)
        </p>

        <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–æ –∫–æ–Ω—Ü–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
        <p th:if="${lastCategoryEndDate != null}"
           th:with="daysLeft=${T(java.time.temporal.ChronoUnit).DAYS.between(#temporals.createToday(), lastCategoryEndDate)},
        colorClass=${daysLeft > 1095 ? 'bg-green-100 text-green-800 p-2 rounded-lg'
                  : (daysLeft > 730 ? 'bg-yellow-100 text-yellow-800 p-2 rounded-lg'
                  : 'bg-red-100 text-red-800 p-2 rounded-lg')}"
           th:classappend="${colorClass}"
           class="text-gray-700 mb-2">
            üèÜ –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
            <span th:text="${#temporals.format(lastCategoryEndDate, 'dd.MM.yyyy')}"></span>
            (<span th:text="${daysLeft}"></span> –¥–Ω–µ–π –¥–æ —Å–¥–∞—á–∏)
        </p>
    </div>

    <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–æ –∫–æ–Ω—Ü–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
    <p th:if="${lastCategoryEndDate != null}"
       th:with="daysLeft=${T(java.time.temporal.ChronoUnit).DAYS.between(#temporals.createToday(), lastCategoryEndDate)},
        colorClass=${daysLeft > 1095 ? 'bg-green-100 text-green-800 p-2 rounded-lg'
                  : (daysLeft > 730 ? 'bg-yellow-100 text-yellow-800 p-2 rounded-lg'
                  : 'bg-red-100 text-red-800 p-2 rounded-lg')}"
       th:classappend="${colorClass}"
       class="text-gray-700 mb-2">
        üèÜ –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
        <span th:text="${#temporals.format(lastCategoryEndDate, 'dd.MM.yyyy')}"></span>
        (<span th:text="${daysLeft}"></span> –¥–Ω–µ–π –¥–æ —Å–¥–∞—á–∏)
    </p>

</div>

<!-- –ö–Ω–æ–ø–∫–∏ -->
<div class="grid grid-cols-3 gap-4 mb-8">
    <a th:href="@{/workers/view/{workerId}/achievements(workerId=${worker.id})}"
       class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg text-center">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</a>

    <a th:href="@{/workers/view/{workerId}/categories(workerId=${worker.id})}"
       class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg text-center">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</a>

    <a th:href="@{/workers/view/{workerId}/eccs(workerId=${worker.id})}"
       class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg text-center">–≠–ö–ö</a>

    <a th:href="@{/workers/view/{workerId}/qualifications(workerId=${worker.id})}"
       class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg text-center">–ü–æ–≤—ã—à. –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏</a>

    <a th:href="@{/workers/view/{workerId}/trains(workerId=${worker.id})}"
       class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-lg text-center">–°—Ç–∞–∂–∏—Ä–æ–≤–∫–∏</a>

    <a th:href="@{/workers/view/{workerId}/vacations(workerId=${worker.id})}"
       class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg text-center">–û—Ç–ø—É—Å–∫–∞</a>
</div>

<!-- –§–ª–∞–≥–∏ / –°–æ–±—ã—Ç–∏—è -->
<div class="bg-white shadow-md rounded-xl p-4 border border-gray-200 mb-6">
    <h3 class="text-lg font-semibold text-gray-800 mb-3">–°–æ–±—ã—Ç–∏—è</h3>
    <table class="w-full text-sm text-center border border-gray-300">
        <thead>
        <tr class="bg-gray-200">
            <th class="px-3 py-2 border border-gray-300">–°–æ–±—ã—Ç–∏–µ</th>
            <th class="px-3 py-2 border border-gray-300">–ê–∫—Ç–∏–≤–Ω–æ</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td class="px-3 py-2 border border-gray-300 text-left">–ù–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ—Ç–ø—É—Å–∫–µ</td>
            <td class="px-3 py-2 border border-gray-300"
                th:classappend="${worker.isVacated} ? 'bg-yellow-200' : 'bg-gray-100'"
                th:text="${worker.isVacated ? '–î–∞' : '–ù–µ—Ç'}"></td>
        </tr>
        <tr>
            <td class="px-3 py-2 border border-gray-300 text-left">–ë—É–¥–µ—Ç –≤ –æ—Ç–ø—É—Å–∫–µ –≤ –±–ª–∏–∂–∞–π—à–∏–µ 3 –º–µ—Å—è—Ü–∞</td>
            <td class="px-3 py-2 border border-gray-300"
                th:classappend="${worker.isVacatedIn3Months} ? 'bg-yellow-200' : 'bg-gray-100'"
                th:text="${worker.isVacatedIn3Months ? '–î–∞' : '–ù–µ—Ç'}"></td>
        </tr>
        <tr>
            <td class="px-3 py-2 border border-gray-300 text-left">–ü–æ–≤—ã—à–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –±–ª–∏–∂–∞–π—à–∏–µ 365 –¥–Ω–µ–π</td>
            <td class="px-3 py-2 border border-gray-300"
                th:classappend="${worker.isCategoryNextYear} ? 'bg-yellow-200' : 'bg-gray-100'"
                th:text="${worker.isCategoryNextYear ? '–î–∞' : '–ù–µ—Ç'}"></td>
        </tr>
        <tr>
            <td class="px-3 py-2 border border-gray-300 text-left">–°—Ç–∞–∂–∏—Ä–æ–≤–∫–∞ –≤ –±–ª–∏–∂–∞–π—à–∏–µ 30 –¥–Ω–µ–π</td>
            <td class="px-3 py-2 border border-gray-300"
                th:classappend="${worker.isTrainNextMonth} ? 'bg-yellow-200' : 'bg-gray-100'"
                th:text="${worker.isTrainNextMonth ? '–î–∞' : '–ù–µ—Ç'}"></td>
        </tr>
        <tr>
            <td class="px-3 py-2 border border-gray-300 text-left">–≠–ö–ö –≤ –±–ª–∏–∂–∞–π—à–∏–µ 30 –¥–Ω–µ–π</td>
            <td class="px-3 py-2 border border-gray-300"
                th:classappend="${worker.isEccNextMonth} ? 'bg-yellow-200' : 'bg-gray-100'"
                th:text="${worker.isEccNextMonth ? '–î–∞' : '–ù–µ—Ç'}"></td>
        </tr>
        <tr>
            <td class="px-3 py-2 border border-gray-300 text-left">–ü–æ–≤—ã—à–µ–Ω–∏–µ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ –±–ª–∏–∂–∞–π—à–∏–µ 30 –¥–Ω–µ–π</td>
            <td class="px-3 py-2 border border-gray-300"
                th:classappend="${worker.isQualificationNextMonth} ? 'bg-yellow-200' : 'bg-gray-100'"
                th:text="${worker.isQualificationNextMonth ? '–î–∞' : '–ù–µ—Ç'}"></td>
        </tr>
        <tr>
            <td class="px-3 py-2 border border-gray-300 text-left">–ö–∞—Ç–µ–≥–æ—Ä–∏—è –≤ –±–ª–∏–∂–∞–π—à–∏–µ 3 –º–µ—Å—è—Ü–∞</td>
            <td class="px-3 py-2 border border-gray-300"
                th:classappend="${worker.isCategoryNext3Month} ? 'bg-yellow-200' : 'bg-gray-100'"
                th:text="${worker.isCategoryNext3Month ? '–î–∞' : '–ù–µ—Ç'}"></td>
        </tr>
        <tr>
            <td class="px-3 py-2 border border-gray-300 text-left">–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –∫—Ä–∞—Ç–µ–Ω 5</td>
            <td class="px-3 py-2 border border-gray-300"
                th:classappend="${worker.isBday5} ? 'bg-yellow-200' : 'bg-gray-100'"
                th:text="${worker.isBday5 ? '–î–∞' : '–ù–µ—Ç'}"></td>
        </tr>
        </tbody>
    </table>
</div>

</body>
</html>
